/*
 * This build file was generated by the Gradle 'init' task.
 *
 * This generated file contains a commented-out sample Java project to get you started.
 * For more details take a look at the Java Quickstart chapter in the Gradle
 * user guide available at https://docs.gradle.org/3.4.1/userguide/tutorial_java_projects.html
 */
buildscript {
    repositories {
        jcenter()
    }
    dependencies {
        classpath "ru.d10xa:gradle-allure-plugin:0.5.0"
    }
}

// Apply the java plugin to add support for Java

allprojects{
    apply plugin: 'java'
}

subprojects{

    apply plugin: 'ru.d10xa.allure'

    // In this section you declare where to find the dependencies of your project
    repositories {
        // Use 'jcenter' for resolving your dependencies.
        // You can declare any Maven/Ivy/file repository here.
        jcenter()
    }

    dependencies{
        compile group: 'org.testcontainers', name: 'testcontainers', version: '1.2.0'
        compile group: 'io.github.bonigarcia', name: 'webdrivermanager', version: '1.6.1'
    }

    test.outputs.upToDateWhen {false}

    allure {
        aspectjweaver = true
        junit = true
        allureResultsDir = "$buildDir/allure-results"
        allureReportDir = "$buildDir/allure-report"
        allureVersion = "1.4.24.RC3"
    }

    tasks.withType(Test)*.finalizedBy allureReport
}
